(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{11:function(e,t,a){},28:function(e,t,a){e.exports=a(59)},33:function(e,t,a){},34:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(12),o=a.n(c),u=(a(33),a(34),a(6)),s=a(2),i=a.n(s),l=a(5),p=(a(11),a(9)),d=a.n(p);function m(e){return""!=e.formatted?e.formatted:""!=e.components.town&&""!=e.components.country?"".concat(e.components.town," , ").concat(e.components.country):"My Location"}function f(e,t){return"https://api.opencagedata.com/geocode/v1/json?key=9dbde76d6a3b406c81e5dee6c2363c3a&q="+encodeURIComponent(e+","+t)+"&language=en&pretty=1&no_annotations=1"}var b={getLocationName:function(){var e=Object(l.a)(i.a.mark((function e(t,a){var r,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t," , ").concat(a),n=f(t,a),e.prev=2,e.next=5,d.a.get(n);case 5:(c=e.sent)&&(r=m(c.data.results[0])),e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",{errorMsg:e.t0.message});case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()};function h(){return new Promise((function(e,t){return navigator.geolocation.getCurrentPosition(e,t)}))}function v(){return(v=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h();case 3:return t=e.sent,e.abrupt("return",{lat:t.coords.latitude,lon:t.coords.longitude});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{errorMsg:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var w={getLatLon:function(){return v.apply(this,arguments)}},g=a(13),E=a.n(g),k=function(e){return n.a.createElement("div",null,n.a.createElement("div",{id:"weather_infobox",className:"weather-info"},n.a.createElement("div",{id:"weather_location",className:"weather-info__location"},e.locationData.name),n.a.createElement("div",{className:"weather-info__icon"},n.a.createElement(E.a,{color:"white",icon:e.weatherInfo.icon,autoplay:!0})),n.a.createElement("div",{className:"weather-info__temperature"},n.a.createElement("span",{id:"weather_temp"},e.weatherInfo.temperature),n.a.createElement("span",null,"\u2103")),n.a.createElement("div",{id:"weather_description",className:"weather-info__description"},e.weatherInfo.summary)))},y=function(e){return n.a.createElement("div",{id:"error_text",className:"error-text"},e.errorMsg)},j=function(){return n.a.createElement("div",{id:"loader",className:"loader"},n.a.createElement("div",{className:"lds-ripple"},n.a.createElement("div",null),n.a.createElement("div",null)))};function O(e){var t=5/9*(e-32);return Math.round(t)}function x(e){return e.toUpperCase().replaceAll("-","_")}function N(){return(N=Object(l.a)(i.a.mark((function e(t,a){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cors-anywhere.herokuapp.com/","https://api.darksky.net/forecast/557ecd4b8c8bbba02f4a50afe884934b/",r="https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/557ecd4b8c8bbba02f4a50afe884934b/"+t+","+a,e.prev=3,e.next=6,d.a.get(r);case 6:return n=e.sent,e.abrupt("return",{temperature:O(n.data.currently.temperature),icon:x(n.data.currently.icon),summary:n.data.currently.summary});case 10:return e.prev=10,e.t0=e.catch(3),e.abrupt("return",{errorMsg:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}var M={getWeatherInfo:function(e,t){return N.apply(this,arguments)}},_=a(62),L=a(8),I=a.n(L),C=function(){var e=Object(l.a)(i.a.mark((function e(t,a,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getLocationName(a,r);case 2:if(void 0==(n=e.sent).errorMsg){e.next=5;break}throw n.errorMsg;case 5:return e.abrupt("return",{name:n,latitude:a,longitude:r});case 6:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(i.a.mark((function e(t,a,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.getWeatherInfo(a,r);case 2:if(void 0==(n=e.sent).errorMsg){e.next=5;break}throw n.errorMsg;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),W=function(e){var t=Object(r.useState)(void 0),a=Object(u.a)(t,2),c=a[0],o=a[1],s=Object(r.useState)(void 0),p=Object(u.a)(s,2),d=p[0],m=p[1],f=Object(r.useState)(void 0),b=Object(u.a)(f,2),h=b[0],v=b[1],g=Object(r.useState)(void 0),E=Object(u.a)(g,2),O=E[0],x=E[1],N=Object(r.useState)(""),M=Object(u.a)(N,2),L=M[0],W=M[1],P=Object(r.useState)(!0),D=Object(u.a)(P,2),U=D[0],A=D[1],B=Object(r.useState)("tab1"),J=Object(u.a)(B,2),Y=J[0],q=J[1],R=Object(_.a)(["getMyLocationName",c,d],C),T=R.data,$=R.status,z=R.error,F=Object(_.a)(["callWeatherApi",h,O],S),G=F.data,H=F.status,K=F.error;Object(r.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getLatLon();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){o(e.lat),m(e.lon),v(e.lat),x(e.lon)}))}),[]);var Q=function(){var e=Object(l.a)(i.a.mark((function e(t,a,r,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(t.target.id),v(a),x(r),W(n),A("My Location"===n);case 5:case"end":return e.stop()}}),e)})));return function(t,a,r,n){return e.apply(this,arguments)}}();return n.a.createElement("div",null,n.a.createElement("h1",null,"The Weather Page"),n.a.createElement("div",{id:"tabs_wrapper",className:"tabs-wrapper"},n.a.createElement("button",{id:"tab1",onClick:function(e){return Q(e,c,d,"My Location")},className:I()({tab:!0,selected:"tab1"===Y}),disabled:"tab1"===Y},"My Location"),n.a.createElement("button",{id:"tab2",onClick:function(e){return Q(e,"51.507351","-0.127758","London")},className:I()({tab:!0,selected:"tab2"===Y}),disabled:"tab2"===Y},"London"),n.a.createElement("button",{id:"tab3",onClick:function(e){return Q(e,"48.856613","2.352222","Paris")},className:I()({tab:!0,selected:"tab3"===Y}),disabled:"tab3"===Y},"Paris"),n.a.createElement("button",{id:"tab4",onClick:function(e){return Q(e,"40.712776","-74.005974","New York")},className:I()({tab:!0,selected:"tab4"===Y}),disabled:"tab4"===Y},"New York"),n.a.createElement("button",{id:"tab5",onClick:function(e){return Q(e,"55.755825","37.617298","Moskva")},className:I()({tab:!0,selected:"tab5"===Y}),disabled:"tab5"===Y},"Moskva")),n.a.createElement("div",null,function(){if("error"===$)return n.a.createElement(y,{errorMsg:z});if("error"===H)return n.a.createElement(y,{errorMsg:K});if("loading"===$||"loading"===H)return n.a.createElement(j,null);if(U&&"success"===$&&"success"===H)return n.a.createElement(k,{locationData:T,weatherInfo:G});if("success"===H){var e={name:L,latitude:h,longitude:O};return n.a.createElement(k,{locationData:e,weatherInfo:G})}return n.a.createElement("div",null,"Unknown error")}()))};var P=function(){return n.a.createElement("div",null,n.a.createElement(W,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(27);o.a.render(n.a.createElement(D.a,null,n.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.55a2c458.chunk.js.map